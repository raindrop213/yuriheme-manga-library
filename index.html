<!doctype html>

<html class="no-js" lang="ja">

<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="all" />

  <title>Yuri·Hime·Lib | RD213</title>

  <link rel="icon" href="./theme/img/favicon.ico">
  <link rel="stylesheet" type="text/css" media="all" href="./theme/css/common.css">
  <link rel="stylesheet" type="text/css" media="all" href="./theme/css/wxgap.css">

  <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP:400,700|Rajdhani:400,700" rel="stylesheet">
  <link href="./theme/fonts/font-icomoon/style.css" rel="stylesheet">
  <link href="./theme/fonts/font-arrows/style.css" rel="stylesheet">
  <link href="./theme/fonts/font-brand/style.css" rel="stylesheet">
  <!-- <link rel="stylesheet" type="text/css" href="./theme/css/jquery.fancybox.min.css"> -->
  <link href="./theme/style.css?3" rel="stylesheet">
  
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-LDX9RHEN77"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-LDX9RHEN77');
  </script>
</head>

<body class="l-body-fit" data-menu-active="home">

  <script src="./header.js"></script>
  
  <main class="l-body-fit__body l-wrapper">

    <section class="home-visual l-content_full l-content_full-sp">
      <div class="home-visual__inner">
        <img src="./uploads/header.jpg" alt="" class="home-visual__image">
        <img src="./theme/img/home/catch.png" alt="" class="home-visual__catch">
      </div>
    </section>

    <section class="home-magazine">
      <div class="home-magazine__inner" id="monthly-magazine"></div>
    </section>


    <section class="home-news l-content_n l-content_n-sp">

      <h2 class="home-heading">
        <!-- <img src="./theme/img/home/news_heading.png" alt="NEWS お知らせ" class="home-heading__image"> -->
        <span class="heading-text heading-text--english">news</span><span
          class="heading-text heading-text--japanese">お知らせ</span>
      </h2>


      <ul class="home-news__list">

        <li class="home-news__item">
          <a href="https://github.com/raindrop213/yuriheme-manga-library/" class="home-news__link" target="_blank">
            <span class="home-news__date">Yuri·Hime·Lib</span>
            <span class="home-news__title">プロジェクトのリポジトリ</span>
          </a>
        </li>

        <li class="home-news__item">
          <a href="https://ebook.raindrop213.com/" class="home-news__link" target="_blank">
            <span class="home-news__date">Calibre-Web</span>
            <span class="home-news__title">個人用epubサイトです</span>
          </a>
        </li>

        <li class="home-news__item">
          <a href="https://l2l.raindrop213.com/" class="home-news__link"
            target="_blank">
            <span class="home-news__date">L2L-Library</span>
            <span class="home-news__title">バイリンガル対訳小説</span>
          </a>
        </li>

      </ul>


      <a href="./backnumber/" class="p-nav-btn p-nav-btn--next home-news__more" title="MORE"></a>

    </section>


    <section class="home-comics l-content_full l-content_full-sp" id="favorites">
      <div class="l-section_l l-section_n-sp">
        <h2 class="home-heading home-heading--center home-heading--circle">
          <span class="heading-text heading-text--english">favorites</span>
          <span class="heading-text heading-text--japanese">お気に入り</span>
        </h2>
        <div class="home-titles__list l-grid l-grid--5 l-grid--2-sp l-grid--gap-c_m l-grid--gap-r_m" id="favorites-list">
          <div class="home-titles__item"></div>
        </div>
      </div>
    </section>

    <section class="home-titles l-content_full l-content_full-sp" id="yuri">
      <div class="l-section_l l-section_n-sp">
        <h2 class="home-heading home-heading--center home-heading--circle">
          <span class="heading-text heading-text--english">yuri list</span>
          <span class="heading-text heading-text--japanese">百合作品</span>
        </h2>
        <div class="home-titles__list l-grid l-grid--5 l-grid--2-sp l-grid--gap-c_m l-grid--gap-r_m" id="yuri-list">
          <div class="home-titles__item"></div>
        </div>
      </div>
    </section>

    <section class="home-comics l-content_full l-content_full-sp" id="collection">
      <div class="l-section_l l-section_n-sp">
        <h2 class="home-heading home-heading--center home-heading--circle">
          <span class="heading-text heading-text--english">collection</span>
          <span class="heading-text heading-text--japanese">収録作品</span>
        </h2>
        <div class="home-titles__list l-grid l-grid--5 l-grid--2-sp l-grid--gap-c_m l-grid--gap-r_m" id="collection-list">
          <div class="home-titles__item"></div>
        </div>
      </div>
    </section>

    <section class="home-titles l-content_full l-content_full-sp" id="one-shot">
      <div class="l-section_l l-section_n-sp">
        <h2 class="home-heading home-heading--center home-heading--circle">
          <span class="heading-text heading-text--english">one-shot</span>
          <span class="heading-text heading-text--japanese">読み切り</span>
        </h2>
        <div class="home-titles__list l-grid l-grid--5 l-grid--2-sp l-grid--gap-c_m l-grid--gap-r_m" id="one-shot-list">
          <div class="home-titles__item"></div>
        </div>
      </div>
    </section>

    <section class="home-comics l-content_full l-content_full-sp" id="artbook">
      <div class="l-section_l l-section_n-sp">
        <h2 class="home-heading home-heading--center home-heading--circle">
          <span class="heading-text heading-text--english">artbook</span>
          <span class="heading-text heading-text--japanese">画集</span>
        </h2>
        <div class="home-titles__list l-grid l-grid--5 l-grid--2-sp l-grid--gap-c_m l-grid--gap-r_m" id="artbook-list">
          <div class="home-titles__item"></div>
        </div>
      </div>
    </section>

    <script>
      fetch("./title/title_structure.json")
        .then(response => response.json())
        .then(data => {
          // 最新刊更新
          const monthlyContainer = document.getElementById("monthly-magazine");
          const date = "2024年05月17日(金)発売";
          const monthlyPath = "./title/[一迅社] コミック百合姫 2024年/[一迅社] コミック百合姫 2024年07月号";
          const monthlyhName = "コミック百合姫2024年07月号";

          const monthlyContent = `
            <a href="${monthlyPath}.html"
              class="home-magazine__link p-link_fade" target="_blank" rel="noopener noreferrer">
              <img src="${monthlyPath}.jpg" alt="" class="u-sz_w_100">
            </a>

            <div class="home-magazine__text">
              <h2 class="home-magazine__title">
                <strong>${monthlyhName}</strong>
              </h2>
              <p class="home-magazine__date">${date}</p>

              <a href="${monthlyPath}.html"
                class="p-btn p-btn--primary p-btn--minw_200 u-sz_w_100-sp" target="_blank"
                rel="noopener noreferrer">Continue</a>
            </div>`;
          monthlyContainer.innerHTML += monthlyContent;

          // main栏
          const favoritesContainer = document.getElementById("favorites-list");
          const yuriContainer = document.getElementById("yuri-list");
          const collectionContainer = document.getElementById("collection-list");
          const oneShotContainer = document.getElementById("one-shot-list");
          const artbookContainer = document.getElementById("artbook-list");

          // 清空现有内容
          favoritesContainer.innerHTML = '';
          yuriContainer.innerHTML = '';
          collectionContainer.innerHTML = '';
          oneShotContainer.innerHTML = '';
          artbookContainer.innerHTML = '';

          // 分类和显示数据
          const artbookItems = [];
          data.forEach(item => {
            const path = encodeURIComponent(item.folderName);
            const htmlContent = `
              <div class="home-titles__item">
                <a href="./title/${path}/" class="c-cardbox p-link_fade">
                  <span class="c-cardbox__thumb c-cardbox__thumb--shadow p-bgimg p-bgimg--b6 p-bgimg--cover u-mg_b_n"
                    style="background-image:url('./title/${path}/cover.jpg')"></span>
                  <span class="c-cardbox__text">
                    <span class="c-cardbox__title">${item.name}</span>
                    <span class="c-cardbox__meta">${item.author.join('×')}</span>
                  </span>
                </a>
              </div>
            `;
    
            // 根据类型分配到对应的容器
            if (item.type.includes("favorites")) {
              favoritesContainer.innerHTML += htmlContent;
            } else if (item.type.includes("yuri")) {
              yuriContainer.innerHTML += htmlContent;
            } else if (item.type.includes("one-shot")) {
              oneShotContainer.innerHTML += htmlContent;
            } else if (item.type.includes("artbook")) {
              artbookItems.push({ htmlContent, folderName: item.folderName });
            } else {
              collectionContainer.innerHTML += htmlContent;
            }
          });
    
          // 对 artbookItems 进行排序
          artbookItems.sort((a, b) => {
            const order = ["(画集)", "(資料集)", "(図書)"];
            const aIndex = order.findIndex(keyword => a.folderName.includes(keyword));
            const bIndex = order.findIndex(keyword => b.folderName.includes(keyword));
            return aIndex - bIndex;
          });
    
          // 将排序后的内容添加到 artbookContainer
          artbookItems.forEach(item => {
            artbookContainer.innerHTML += item.htmlContent;
          });
        });
        
    </script>

    <section class="home-enquete home-info__enquete">
      <div class="home-enquete__inner">

        <h2 class="home-heading home-heading--center home-heading--noresize">
          <!-- <img src="./theme/img/home/enquete_heading.png" alt="コミックスアンケート" height="72"> -->
          <span class="heading-text heading-text--english" style="margin-right: 0">feedback</span>
          <br>
          <span class="heading-text heading-text--japanese">フィードバック</span>
          <br>
          <div class="horizontal-rectangle"></div> <!-- 小矩形横线 -->
        </h2>
        <p class="home-enquete__text">アプリへのご意見・<br>ご感想はこちらから</p>
        <a href="https://github.com/raindrop213/yuriheme-manga-library/issues/new" class="p-nav-btn p-nav-btn--small p-nav-btn--next"
          style="margin:auto;" title="アンケートページ">
        </a>

      </div>
    </section>

  </main>

  <!-- 右侧导航栏 -->
  <nav class="sidebar-nav">
    <ul>
      <li><a href="#favorites" class="nav-link" data-short-text="気"><span>お気に入り</span></a></li>
      <li><a href="#yuri" class="nav-link" data-short-text="百"><span>百合作品</span></a></li>
      <li><a href="#collection" class="nav-link" data-short-text="収"><span>収録作品</span></a></li>
      <li><a href="#one-shot" class="nav-link" data-short-text="切"><span>読み切り</span></a></li>
      <li><a href="#artbook" class="nav-link" data-short-text="画"><span>画集</span></a></li>
    </ul>
  </nav>
  
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const sections = document.querySelectorAll("section");
      const navLinks = document.querySelectorAll(".nav-link");

      function activateLink() {
        const windowHeight = window.innerHeight;
        const windowCenter = window.scrollY + windowHeight / 2;

        sections.forEach(section => {
          const sectionTop = section.offsetTop;
          const sectionHeight = section.offsetHeight;

          if (windowCenter >= sectionTop && windowCenter < sectionTop + sectionHeight) {
            navLinks.forEach(link => {
              link.classList.remove("active");
              if (link.getAttribute("href").substring(1) === section.id) {
                link.classList.add("active");
              }
            });
          }
        });
      }

      function scrollToSection(event) {
        event.preventDefault();
        const targetId = event.currentTarget.getAttribute("href").substring(1);
        const targetSection = document.getElementById(targetId);

        window.scrollTo({
          top: targetSection.offsetTop,
          behavior: "smooth"
        });

        // 不需要移除其他链接的激活状态，滚动时会自动激活
      }

      navLinks.forEach(link => {
        link.addEventListener("click", scrollToSection);
      });

      window.addEventListener("scroll", activateLink);

      // 初次加载时也要调用一次以确保正确的链接被激活
      activateLink();
    });
  </script>
  
  <script src="./footer.js"></script>

  <script defer src="./theme/js/jquery.min.js"></script>
  <script defer src="./theme/js/polyfill.min.js"></script>
  <script defer src="./theme/js/stickyfill.min.js"></script>
  <script defer src="./theme/js/jquery.fancybox.min.js"></script>

  <script defer src="./theme/js/vendor.js"></script>
  <script defer src="./theme/js/bundle.js"></script>

</body>

</html>